# 福建红色图谱 - 完整交互细节与功能关联总结

## 📱 小程序架构概览

### 页面结构（共9个页面）
1. **首页** - 推荐展示页面
2. **扫码页** - 扫码识别功能
3. **搜索页** - 搜索筛选页面
4. **详情页** - 建筑详情展示
5. **三维模型页** - 3D全景查看
6. **知识图谱页** - 关系网络展示
7. **地图页** - 地图导航功能
8. **收藏页** - 我的收藏管理
9. **关于页** - 项目信息页面

---

## 🎨 设计系统

### 主色调
- **主红色**: `#B71C1C` (革命深红色)
- **背景色**: `#F8F6F6` / `#F7F7F7` (米白色，营造历史文献质感)
- **卡片白**: `#FFFFFF`
- **文字**: `#111827` (深灰黑)

### Logo标识
- **官方Logo**: 红色五角星图标
- **位置**: 收藏页右上角装饰区域、关于页面展示

---

## 🔄 导航系统架构

### 底部导航栏（3个核心功能）
```
┌─────────────────────────────────────┐
│  首页    扫码(凸起)    收藏        │
└─────────────────────────────────────┘
```

#### 1. 首页按钮
- **图标**: 房屋形状
- **激活状态**: 红色填充 + 红色文字
- **功能**: 返回首页推荐列表

#### 2. 扫码按钮（中央凸起设计）
- **样式**: 红色圆形凸起 + 扫码图标
- **特点**: 视觉焦点，位置向上偏移
- **功能**: 进入AR扫码识别页面

#### 3. 收藏按钮
- **图标**: 心形图标
- **激活状态**: 红色填充 + 红色文字
- **功能**: 查看我的收藏列表

---

## 📄 页面详细交互

### 1️⃣ 首页（推荐页）

#### 顶部区域
**标题栏** (红色背景 `#B71C1C`)
- 标题: "福建红色图谱"
- 副标题: "Revolutionary Heritage Map"
- 内边距: `pt-14 pb-4`（适配刘海屏）

**搜索栏**
- 占位符: "搜索革命遗址、纪念馆..."
- 点击行为: 跳转到「搜索页」
- 左侧图标: 放大镜
- 右侧按钮: 地图图标（点击跳转「地图页」）

**地区筛选栏** (横向滚动)
- 选项: 全省、闽东、闽北、闽西、闽南
- 激活状态: 红色背景 + 白色文字
- 未激活: 灰色背景 + 边框

#### 内容区域
**建筑卡片**（垂直滚动列表）
- 左侧: 图片 (112x112px)
  - 左上角标号徽章（序号1-4）
  - hover时图片放大效果
- 右侧信息:
  - 红色竖条装饰
  - 建筑名称（粗体）
  - 位置信息（带定位图标）
  - 标签（第一个红色，其余灰色）
- 点击行为: 跳转到「详情页」

#### 底部导航
- 三按钮导航栏固定底部
- 首页按钮为激活状态

---

### 2️⃣ 扫码页

#### 顶部栏
- 左侧: 返回箭头（返回首页）
- 中央: "扫码识别建筑" 标题
- 右侧: 空白
- 背景: 米白色半透明

#### 主要内容
**扫码区域**
- 大型扫码提示图标
- 文字提示: "将镜头对准建筑标识牌"
- 副提示: "支持二维码、建筑外观等多种识别方式"
- 动画效果: 扫描线动画

**扫码历史列表**
- 标题: "识别历史"
- 卡片样式:
  - 建筑缩略图（左侧）
  - 建筑名称（中文 + 英文）
  - 识别时间标签（Today/Yesterday）
- 点击行为: 跳转到对应「详情页」

#### 特殊设置
- ✅ 保留底部导航栏（扫码按钮激活）
- ✅ 隐藏滚动条（全局CSS处理）

---

### 3️⃣ 搜索页

#### 顶部搜索栏
- 左侧: 返回按钮
- 中央: 搜索输入框
  - 占位符: "搜索革命遗址、纪念馆..."
  - 自动获取焦点
  - 实时搜索
- 右侧: "取消"按钮（返回首页）

#### 热门搜索
- 标题: "热门搜索"
- 标签云样式
- 预设热门关键词
- 点击快速填充搜索框

#### 搜索结果
- 与首页卡片相同样式
- 实时过滤显示
- 空状态提示

---

### 4️⃣ 详情页（核心页面）

#### 顶部大图区域 (340px高度)
**背景层**
- 建筑主图（全屏宽）
- 渐变遮罩（上下两端深色）

**顶部导航**
- 左侧: 返回按钮（半透明黑色背景）
- 右侧: 分享按钮 + 更多菜单

**底部标题信息**
- 徽章: "红色地标" + "ID编号"
- 建筑名称（大标题）
- 浏览次数统计

#### 圆角卡片内容区
**地址信息卡片**
- 详细地址（带定位图标 + 导航箭头）
- 所属区域
- 城市信息
- 网格布局，图标统一样式

**简介部分**
- 红色竖条标题装饰
- 文字内容（两端对齐）
- "展开阅读"按钮

**功能服务（2x2网格）**
1. **3D全景** 
   - 蓝色图标
   - 点击跳转「三维模型页」
2. **知识图谱**
   - 紫色图标
   - 点击跳转「知识图谱页」
3. **联系电话**
   - 绿色图标
   - 点击拨打电话
4. **参观预约**
   - 橙色图标
   - 弹出预约表单

**开放信息卡片**
- 开放时间
- 门票价格
- 联系方式
- 适宜人群

**相关照片**
- 横向滚动图片列表
- 点击查看大图

**底部操作栏**（固定底部）
- 收藏按钮（心形图标，可切换填充状态）
- 分享按钮
- 导航按钮（跳转「地图页」）

---

### 5️⃣ 三维模型页

#### 顶部栏
- 左侧: 返回箭头（返回详情页）
- 中央: "3D全景" 标题
- 右侧: 截图/分享按钮
- 背景: 深色半透明

#### 3D查看器
- 全屏3D模型展示区
- 手势控制:
  - 单指拖动: 旋转
  - 双指缩放: 放大缩小
  - 双指旋转: 调整角度

#### 控制面板（底部浮层）
- 视角切换按钮（正面、侧面、俯视）
- 自动旋转开关
- 测量工具
- AR模式切换

#### 信息标注点
- 热点标记（建筑特征点）
- 点击弹出文字说明
- 历史照片对比

---

### 6️⃣ 知识图谱页

#### 顶部栏
- 左侧: 返回箭头（返回详情页）
- 中央: "知识图谱" 标题
- 右侧: 筛选按钮

#### 图谱画布
**中心节点**
- 当前建筑（大型圆形节点）
- 红色高亮

**关联节点类型**
1. **人物节点** (蓝色圆形)
   - 革命人物
   - 历史名人
2. **事件节点** (绿色方形)
   - 重要会议
   - 战役事件
3. **地点节点** (橙色三角)
   - 相关遗址
   - 纪念馆
4. **时间节点** (紫色菱形)
   - 历史时期

**连接线**
- 实线: 直接关系
- 虚线: 间接关系
- 线上文字: 关系类型

#### 交互功能
- 拖动画布平移
- 缩放查看
- 点击节点查看详情
- 节点跳转（地点节点可跳转详情页）

#### 底部图例
- 节点类型说明
- 关系类型说明

---

### 7️⃣ 地图页

#### 顶部搜索栏
- 左侧: 返回箭头
- 中央: 搜索框（搜索地点）
- 右侧: 图层切换按钮

#### 地图视图（主体）
**底图**
- 高德/百度地图SDK
- 支持卫星/街道视图切换

**标记点**
- 红色五角星标记（革命遗址）
- 圆形标记（其他建筑）
- 聚合显示（缩小时合并）

**当前位置**
- 蓝色定位点
- 精度圈

#### 侧边功能栏（右侧浮动）
- 定位按钮（回到当前位置）
- 放大/缩小按钮
- 3D视图切换
- 路线规划

#### 底部卡片（选中标记时）
- 建筑缩略图
- 名称 + 距离
- "导航"按钮（启动导航）
- "查看详情"按钮（跳转详情页）

#### 筛选面板（侧滑）
- 地区筛选（闽东、闽北等）
- 类型筛选（纪念馆、旧址等）
- 距离筛选（1km、5km等）

---

### 8️⃣ 收藏页

#### 红色顶部栏（特色设计）
- 背景: `#B71C1C`
- 左侧: 返回按钮（白色）
- 中央: "我的关注" 标题（白色）
- 右侧: 装饰组件（三个圆点 - 红色五角星变体）
  - 1个小圆点 + 1个中空圆点
  - 白色边框 + 黑色半透明背景

#### 筛选栏
- "全部" / "最近添加" 切换按钮
- 右侧 "管理" 按钮
- 激活状态: 白色背景 + 红色文字

#### 收藏列表
**卡片样式**
- 横向布局
- 左侧图片 (88x88px)
- 中间信息:
  - 建筑名称
  - 位置（带定位图标）
  - 收藏时间标签（"2天前"、"1周前"等）
- 右上角: 红色填充心形图标
- hover效果: 图片放大

**空状态**
- 空书签图标
- 提示文字
- "去探索"按钮

#### 底部导航
- 收藏按钮为激活状态

---

### 9️⃣ 关于页（从收藏页三点菜单进入）

#### 弹窗形式
- 从底部滑出动画
- 半透明黑色背景遮罩
- 圆角白色卡片（`rounded-t-3xl`）
- 最大高度: 85vh

#### 顶部标题栏
- "关于项目" 标题
- 右侧: 关闭按钮（X图标）
- 底部边框分隔

#### 内容区域（可滚动）
**App图标和名称**
- Logo图标 (88x88px圆角方形)
- 红色五角星官方Logo
- hover渐变光晕效果
- 应用名称: "红图小程序"
- 版本号: "Version 1.0.2"（灰色胶囊标签）

**项目介绍卡片**
1. **项目介绍**
   - 地图图标（红色）
   - 文字说明（数字化革命遗址地图）

2. **数据来源**
   - 数据库图标（红色）
   - 三项列表:
     - 地方志办公室公开档案
     - 党史研究室出版文献
     - 志愿者实地考察数据

3. **免责声明**
   - 天平图标（红色）
   - 法律免责条款

4. **联系方式**
   - @符号图标（红色）
   - 组织机构: "福建红色历史文化研究小组"
   - 邮箱: contact@redmapproject.cn
   - 复制按钮（点击复制邮箱）

#### 底部版权
- 英文版权信息
- 灰色小字
- 居中对齐

---

## 🔗 功能关联图谱

### 主要跳转路径

```
首页 ────────────────────┐
  │                       │
  ├─→ 搜索页              │
  │   └─→ 详情页          │
  │                       │
  ├─→ 地图页 ─────────────┤
  │   └─→ 详情页          │
  │                       │
  └─→ 详情页 ─────────────┘
       │
       ├─→ 三维模型页
       │   └─→ AR体验
       │
       ├─→ 知识图谱页
       │   └─→ 关联详情页
       │
       └─→ 地图页
           └─→ 导航

扫码页 ─→ 详情页

收藏页 ─→ 详情页
  └─→ 关于弹窗（项目信息）
```

### 核心功能闭环

**发现闭环**
```
首页推荐 → 详情页 → 收藏
         ↑         ↓
      搜索页 ← 查看更多
```

**导航闭环**
```
首页 → 搜索栏右侧地图图标 → 地图页 → 导航
  ↑                                  ↓
  └──────── 详情页底部导航 ←─────────┘
```

**扫码闭环**
```
底部扫码按钮 → 扫码页 → 识别 → 详情页 → 收藏
                ↑                    ↓
                └──── 扫码历史 ←─────┘
```

**深度探索闭环**
```
详情页 → 3D全景 → AR体验
   ↓
   └→ 知识图谱 → 关联建筑 → 新详情页
```

---

## 🎯 交互细节特色

### 视觉反馈
1. **按钮点击**: `active:scale-[0.98]` 缩小效果
2. **卡片点击**: `active:scale-[0.99]` 轻微缩小
3. **图片hover**: `group-hover:scale-110` 放大效果
4. **过渡动画**: `transition-all duration-300`

### 滚动优化
- 全局隐藏滚动条（保留滚动功能）
- 横向滚动: 地区筛选栏、照片列表
- 纵向滚动: 主内容区（预留底部导航空间 `pb-24`）

### 适配设计
1. **安全区域**: 顶部 `pt-12/pt-14` 适配刘海屏
2. **底部安全区**: `env(safe-area-inset-bottom)`
3. **最大宽度**: `max-w-[430px]` 限制手机宽度
4. **响应式**: 自适应不同屏幕高度

### 状态管理
- URL导航: 通过 `activePage` 状态切换页面
- 筛选状态: 地区、类型、时间等多维度筛选
- 收藏状态: 心形图标填充/未填充切换

---

## 📊 数据流转

### 静态数据
- 首页推荐建筑列表（4个精选）
- 扫码历史记录
- 收藏列表
- 知识图谱节点关系

### 动态交互
1. **搜索**: 实时过滤建筑列表
2. **筛选**: 按地区/类型/距离过滤
3. **收藏**: 添加/取消收藏
4. **导航**: 调用地图SDK导航

### 跨页数据传递
- 点击建筑卡片 → 传递建筑ID → 详情页加载对应数据
- 扫码识别 → 传递建筑ID → 跳转详情页
- 知识图谱节点 → 传递关联ID → 跳转新详情页

---

## 🎨 设计一致性

### 统一组件
1. **底部导航栏**: 所有主要页面共享
2. **返回按钮**: 统一样式和位置
3. **卡片样式**: 圆角、阴影、边框一致
4. **图标颜色**: 红色主色调贯穿始终

### 文字规范
- 大标题: `text-2xl` / `text-xl`
- 中标题: `text-lg` / `text-[17px]`
- 正文: `text-sm` / `text-[15px]`
- 小字: `text-xs` / `text-[10px]`

### 间距规范
- 内边距: `p-4` / `px-4` / `py-3`
- 外边距: `mb-4` / `mt-3` / `gap-3`
- 圆角: `rounded-xl` / `rounded-lg` / `rounded-full`

---

## 🚀 技术实现要点

### 核心技术栈
- React (useState for 状态管理)
- Tailwind CSS v4 (样式系统)
- Lucide React (图标库)

### 关键特性
1. **单页面路由**: 通过条件渲染切换页面
2. **回调传递**: `onNavigate` 函数跨组件通信
3. **CSS优化**: 全局滚动条隐藏、过渡动画
4. **图片处理**: `figma:asset` 虚拟模块导入

### 性能优化
- 组件懒加载（条件渲染）
- 图片懒加载（未实现，可扩展）
- 滚动性能（CSS `will-change`）

---

## 📝 总结

### 导航体系
✅ **底部导航精简**: 首页、扫码、收藏三大核心
✅ **功能闭环完整**: 搜索→地图→详情→收藏
✅ **入口清晰**: 首页搜索栏右侧地图图标形成闭环

### 交互亮点
1. **扫码页保留导航**: 符合用户操作习惯
2. **收藏页红色顶栏**: 视觉冲击力强
3. **详情页功能服务**: 3D、图谱一键直达
4. **关于页弹窗**: 不影响主流程，信息完整

### 设计语言
- **革命主题**: 深红色 + 历史文献质感
- **现代交互**: 流畅动画 + 手势优化
- **信息层次**: 清晰的视觉层级
- **文化传承**: 中英双语、官方Logo标识

---

**文档版本**: v1.0  
**更新时间**: 2026-01-29  
**小程序名称**: 福建红色图谱  
**英文名称**: Fujian Revolutionary Heritage Map
